2020-01-13 08:49:18 [main] INFO  c.a.crazyeventgateway.Application - Starting Application on AJ89-M-J3X3 with PID 54862 (/Users/aj89/repos/appdynamics/extensions/crazy-event-gateway/build/classes/java/main started by aj89 in /Users/aj89/repos/appdynamics/extensions/crazy-event-gateway)
2020-01-13 08:49:18 [main] DEBUG c.a.crazyeventgateway.Application - Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE
2020-01-13 08:49:18 [main] INFO  c.a.crazyeventgateway.Application - No active profile set, falling back to default profiles: default
2020-01-13 08:49:18 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.appdynamics.crazyeventgateway.Application]; nested exception is org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'APIRateLimiter' for bean class [com.appdynamics.crazyeventgateway.ratelimiting.APIRateLimiter] conflicts with existing, non-compatible bean definition of same name and class [com.appdynamics.crazyeventgateway.ratelimiter.APIRateLimiter]
2020-01-13 08:49:18 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.appdynamics.crazyeventgateway.Application]; nested exception is org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'APIRateLimiter' for bean class [com.appdynamics.crazyeventgateway.ratelimiting.APIRateLimiter] conflicts with existing, non-compatible bean definition of same name and class [com.appdynamics.crazyeventgateway.ratelimiter.APIRateLimiter]
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:184)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:325)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:242)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:275)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:95)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:706)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:532)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)
	at com.appdynamics.crazyeventgateway.Application.main(Application.java:27)
Caused by: org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'APIRateLimiter' for bean class [com.appdynamics.crazyeventgateway.ratelimiting.APIRateLimiter] conflicts with existing, non-compatible bean definition of same name and class [com.appdynamics.crazyeventgateway.ratelimiter.APIRateLimiter]
	at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.checkCandidate(ClassPathBeanDefinitionScanner.java:349)
	at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:287)
	at org.springframework.context.annotation.ComponentScanAnnotationParser.parse(ComponentScanAnnotationParser.java:132)
	at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:290)
	at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:245)
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:202)
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:170)
	... 11 common frames omitted
2020-01-13 09:07:46 [main] INFO  c.a.crazyeventgateway.Application - Starting Application on AJ89-M-J3X3 with PID 58622 (/Users/aj89/repos/appdynamics/extensions/crazy-event-gateway/build/classes/java/main started by aj89 in /Users/aj89/repos/appdynamics/extensions/crazy-event-gateway)
2020-01-13 09:07:46 [main] DEBUG c.a.crazyeventgateway.Application - Running with Spring Boot v2.2.1.RELEASE, Spring v5.2.1.RELEASE
2020-01-13 09:07:46 [main] INFO  c.a.crazyeventgateway.Application - No active profile set, falling back to default profiles: default
2020-01-13 09:07:47 [main] DEBUG o.s.web.context.ContextLoader - Published root WebApplicationContext as ServletContext attribute with name [org.springframework.web.context.WebApplicationContext.ROOT]
2020-01-13 09:07:47 [main] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 570 ms
2020-01-13 09:07:47 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2020-01-13 09:07:47 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 4 mappings in 'requestMappingHandlerMapping'
2020-01-13 09:07:47 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2020-01-13 09:07:47 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2020-01-13 09:07:47 [main] INFO  c.a.crazyeventgateway.Application - Started Application in 1.06 seconds (JVM running for 1.327)
2020-01-13 09:08:04 [http-nio-9000-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2020-01-13 09:08:04 [http-nio-9000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2020-01-13 09:08:04 [http-nio-9000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2020-01-13 09:08:04 [http-nio-9000-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2020-01-13 09:08:04 [http-nio-9000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/ads/events", parameters={}
2020-01-13 09:08:04 [http-nio-9000-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.appdynamics.crazyeventgateway.controller.AdEventTrackingController#ingestEvents(AdTrackingEvents)
2020-01-13 09:08:04 [http-nio-9000-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.appdynamics.crazyeventgateway.model.AdTrackingEvents@2d660a63]
2020-01-13 09:08:04 [http-nio-9000-exec-2] INFO  c.a.c.ratelimiter.APIRateLimiter - Request Permitted
2020-01-13 09:08:04 [http-nio-9000-exec-2] INFO  c.a.c.batchprocessor.BatchManager - Found 7 events of type AD_VIEWED in the current request. Creating task..
2020-01-13 09:08:04 [http-nio-9000-exec-2] INFO  c.a.c.batchprocessor.BatchManager - Found 4 events of type AD_CLICKED in the current request. Creating task..
2020-01-13 09:08:04 [http-nio-9000-exec-2] INFO  c.a.c.batchprocessor.BatchManager - Found 0 events of type AD_DISMISSED in the current request. Creating task..
2020-01-13 09:08:04 [http-nio-9000-exec-2] INFO  c.a.c.batchprocessor.BatchManager - Found 1 events of type AD_CONVERTED_CUSTOMER in the current request. Creating task..
2020-01-13 09:08:04 [pool-1-thread-1] DEBUG c.a.c.batchprocessor.BatchProcessor - Attempting to ingest current batch with 7 events
2020-01-13 09:08:04 [pool-1-thread-2] DEBUG c.a.c.batchprocessor.BatchProcessor - Attempting to ingest current batch with 4 events
2020-01-13 09:08:04 [pool-1-thread-3] DEBUG c.a.c.batchprocessor.BatchProcessor - Attempting to ingest current batch with 1 events
2020-01-13 09:08:04 [pool-1-thread-1] DEBUG c.a.c.batchprocessor.BatchProcessor - Partitioning batch
2020-01-13 09:08:04 [pool-1-thread-2] DEBUG c.a.c.batchprocessor.BatchProcessor - Partitioning batch
2020-01-13 09:08:04 [pool-1-thread-2] DEBUG c.a.c.batchprocessor.BatchProcessor - Max batch size limit hit for current batch. Flushing
2020-01-13 09:08:04 [pool-1-thread-1] DEBUG c.a.c.batchprocessor.BatchProcessor - Max batch size limit hit for current batch. Flushing
2020-01-13 09:08:04 [pool-1-thread-1] INFO  c.a.c.batchprocessor.EventWriter - Successfully published 4 events to sink AD_VIEWED.log
2020-01-13 09:08:04 [pool-1-thread-1] DEBUG c.a.c.batchprocessor.BatchProcessor - Waiting for 15 seconds to flush leftover events from request
2020-01-13 09:08:04 [pool-1-thread-2] INFO  c.a.c.batchprocessor.EventWriter - Successfully published 4 events to sink AD_CLICKED.log
2020-01-13 09:08:04 [http-nio-9000-exec-2] INFO  c.a.c.c.AdEventTrackingController - Request processed successfully
2020-01-13 09:08:04 [http-nio-9000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json] and supported [application/json]
2020-01-13 09:08:04 [http-nio-9000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing ["SUCCESS"]
2020-01-13 09:08:04 [http-nio-9000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 202 ACCEPTED
2020-01-13 09:08:19 [pool-2-thread-1] DEBUG c.a.c.batchprocessor.BatchProcessor - Executing Task At 249372612488579
2020-01-13 09:08:19 [pool-3-thread-1] DEBUG c.a.c.batchprocessor.BatchProcessor - Executing Task At 249372612487911
2020-01-13 09:08:19 [pool-4-thread-1] DEBUG c.a.c.batchprocessor.BatchProcessor - Executing Task At 249372612487971
2020-01-13 09:08:19 [pool-2-thread-1] INFO  c.a.c.batchprocessor.EventWriter - Successfully published 0 events to sink AD_CLICKED.log
2020-01-13 09:08:19 [pool-3-thread-1] INFO  c.a.c.batchprocessor.EventWriter - Successfully published 3 events to sink AD_VIEWED.log
2020-01-13 09:08:19 [pool-4-thread-1] INFO  c.a.c.batchprocessor.EventWriter - Successfully published 1 events to sink AD_CONVERTED_CUSTOMER.log
